<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bird Spotter</title>
  <style>
    body {
      background: #e6f0ec;
      font-family: 'Georgia', serif;
      color: #2c3e34;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 0.5em;
    }

    .binocular-frame {
      width: 350px;
      height: 200px;
      background: radial-gradient(ellipse at center, #000 30%, #222 70%);
      border-radius: 100px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 40px rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bird {
      position: absolute;
      max-width: 70%;
      opacity: 0;
      transform: translateY(0) scale(0.9);
      transition: opacity 0.3s ease, transform 0.4s ease;
    }

    .bird.enter {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    @keyframes flyPast {
      0% {
        transform: translateX(300px) scale(0.8);
        opacity: 0;
      }
      40% {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
      60% {
        transform: translateX(-50px) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateX(-350px) scale(0.8);
        opacity: 0;
      }
    }

    .fly {
      animation: flyPast 0.4s ease-in-out forwards;
    }

    .spin-btn {
      margin-top: 20px;
      padding: 12px 20px;
      font-size: 1rem;
      border: none;
      background: #4a7a5e;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .spin-btn:hover {
      background: #366046;
    }

    .journal {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: #f8f5e6;
      border: 2px solid #b6a77b;
      border-radius: 10px;
      width: 240px;
      max-height: 60vh;
      overflow-y: auto;
      transition: all 0.4s ease;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .journal.collapsed {
      height: 40px;
      width: 120px;
      overflow: hidden;
    }

    .journal-header {
      background: #d2c6a3;
      padding: 8px;
      cursor: pointer;
      text-align: center;
      font-weight: bold;
      border-bottom: 2px solid #b6a77b;
    }

    .journal-content {
      padding: 10px;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>Bird Spotter</h1>

  <div class="binocular-frame" id="binocularFrame">
    <img id="birdImage" class="bird" src="https://placehold.co/200x100?text=Bird" alt="Bird">
  </div>

  <button class="spin-btn" id="spinBtn">Spot a Bird!</button>

  <div class="journal collapsed" id="journal">
    <div class="journal-header" id="journalHeader">Bird Journal</div>
    <div class="journal-content" id="journalContent"></div>
  </div>

  <script>
    const birds = [
      { name: "European Robin", region: "Europe" },
      { name: "Eurasian Blue Tit", region: "Europe" },
      { name: "Great Tit", region: "Europe" },
      { name: "Blackbird", region: "Europe" },
      { name: "Chaffinch", region: "Europe" },
      { name: "European Goldfinch", region: "Europe" },
      { name: "Eurasian Wren", region: "Europe" },
      { name: "Magpie", region: "Europe" },
      { name: "Jay", region: "Europe" },
      { name: "Common Kingfisher", region: "Europe" },
      { name: "Barn Owl", region: "Europe" },
      { name: "Eurasian Nuthatch", region: "Europe" },
      { name: "Song Thrush", region: "Europe" },
      { name: "Starling", region: "Europe" },
      { name: "Wood Pigeon", region: "Europe" },
      { name: "Carrion Crow", region: "Europe" },
      { name: "House Sparrow", region: "Europe" },
      { name: "Pied Wagtail", region: "Europe" },
      { name: "European Green Woodpecker", region: "Europe" },
      { name: "Eurasian Bullfinch", region: "Europe" },
      { name: "Northern Cardinal", region: "North America" },
      { name: "Blue Jay", region: "North America" },
      { name: "American Robin", region: "North America" },
      { name: "Black-capped Chickadee", region: "North America" },
      { name: "American Goldfinch", region: "North America" },
      { name: "Downy Woodpecker", region: "North America" },
      { name: "Red-winged Blackbird", region: "North America" },
      { name: "Baltimore Oriole", region: "North America" },
      { name: "Eastern Bluebird", region: "North America" },
      { name: "Tufted Titmouse", region: "North America" },
      { name: "Mourning Dove", region: "North America" },
      { name: "Northern Flicker", region: "North America" },
      { name: "American Crow", region: "North America" },
      { name: "Carolina Wren", region: "North America" },
      { name: "White-breasted Nuthatch", region: "North America" },
      { name: "Tree Swallow", region: "North America" },
      { name: "Cedar Waxwing", region: "North America" },
      { name: "Red-tailed Hawk", region: "North America" },
      { name: "Great Horned Owl", region: "North America" },
      { name: "American Kestrel", region: "North America" }
    ];

    let spotted = JSON.parse(localStorage.getItem('spottedBirds')) || [];

    const binocularFrame = document.getElementById('binocularFrame');
    const birdImage = document.getElementById('birdImage');
    const spinBtn = document.getElementById('spinBtn');
    const journal = document.getElementById('journal');
    const journalHeader = document.getElementById('journalHeader');
    const journalContent = document.getElementById('journalContent');

    function updateJournal() {
      if (!spotted.length) {
        journalContent.innerHTML = '<em>No birds spotted yet.</em>';
        return;
      }
      journalContent.innerHTML = spotted
        .map(b => `<div>ðŸª¶ <strong>${b.name}</strong> <span style="color:#6a7c6e;">(${b.region})</span></div>`)
        .join('');
    }

    function spinBird() {
      spinBtn.disabled = true;
      let cycles = 15;
      let delay = 100;

      function flyPast() {
        const tempBird = document.createElement('img');
        const randomBird = birds[Math.floor(Math.random() * birds.length)];
        tempBird.src = "https://placehold.co/200x100?text=" + encodeURIComponent(randomBird.name);
        tempBird.classList.add('bird', 'fly');
        binocularFrame.appendChild(tempBird);

        tempBird.addEventListener('animationend', () => tempBird.remove());

        cycles--;
        delay += 60;

        if (cycles > 0) {
          setTimeout(flyPast, delay);
        } else {
          // Final chosen bird
          const chosen = birds[Math.floor(Math.random() * birds.length)];
          setTimeout(() => {
            birdImage.src = "https://placehold.co/200x100?text=" + encodeURIComponent(chosen.name);
            birdImage.alt = chosen.name;
            birdImage.classList.add('enter');
            if (!spotted.some(b => b.name === chosen.name)) {
              spotted.push(chosen);
              localStorage.setItem('spottedBirds', JSON.stringify(spotted));
            }
            updateJournal();
            spinBtn.disabled = false;
          }, 500);
        }
      }

      flyPast();
    }

    spinBtn.addEventListener('click', spinBird);
    journalHeader.addEventListener('click', () => {
      journal.classList.toggle('collapsed');
    });

    updateJournal();
  </script>
</body>
</html>
